[
    {
        "owner": {
            "reputation": 12718,
            "user_id": 2940908,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/E79WU.jpg?s=128&g=1",
            "display_name": "agua from mars",
            "link": "https://stackoverflow.com/users/2940908/agua-from-mars"
        },
        "is_accepted": true,
        "score": 8,
        "last_activity_date": 1585814873,
        "last_edit_date": 1585814873,
        "creation_date": 1583739082,
        "answer_id": 60596261,
        "question_id": 60593985,
        "content_license": "CC BY-SA 4.0",
        "body": "<h1>March 12th, 2020</h1>\n\n<p>To add OIDC to an existing Blazor WASM app using an existing OAuth identity provider read <a href=\"https://docs.microsoft.com/en-us/aspnet/core/security/blazor/webassembly/standalone-with-authentication-library?view=aspnetcore-3.1\" rel=\"noreferrer\">Secure an ASP.NET Core Blazor WebAssembly standalone app with the Authentication library</a>.<br>\nThe new <a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Authentication/3.2.0-preview2.20160.5\" rel=\"noreferrer\">Microsoft.AspNetCore.Components.WebAssembly.Authentication</a> support automatic silent renew. </p>\n\n<p>If you prefere to use a configuration file instead of hard coded values, you can setup the app like this</p>\n\n<blockquote>\n  <p>Visit <a href=\"https://theidserver.herokuapp.com/\" rel=\"noreferrer\">theidserver.herokuapp.com/</a> for a full fonctional sample.</p>\n</blockquote>\n\n<ul>\n<li><p><strong>Upgrade your app to 3.2.0 Preview 2</strong><br>\nRead <a href=\"https://devblogs.microsoft.com/aspnet/blazor-webassembly-3-2-0-preview-2-release-now-available/\" rel=\"noreferrer\">Upgrade an existing project paragraph</a></p></li>\n<li><p><strong>Add package Microsoft.AspNetCore.Components.WebAssembly.Authentication</strong></p></li>\n</ul>\n\n<pre><code>dotnet add package Microsoft.AspNetCore.Components.WebAssembly.Authentication::3.2.0-preview2.20160.5\n</code></pre>\n\n<ul>\n<li><strong>Add AuthenticationService.js to index.html</strong></li>\n</ul>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n...\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;app&gt;Loading...&lt;/app&gt;\n...\n    &lt;script src=\"_content/Microsoft.AspNetCore.Components.WebAssembly.Authentication/AuthenticationService.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"_framework/blazor.webassembly.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<ul>\n<li><strong>Add an oidc.json file in application's wwwroot folder with this structure</strong></li>\n</ul>\n\n<pre><code>{\n  \"authority\": \"https://myidp.com\", // Uri to your IDP server\n  \"client_id\": \"myclientid\", // Your client id\n  \"redirect_uri\": \"https://localhost:44333/authentication/login-callback\", // Uri to the application login callback\n  \"post_logout_redirect_uri\": \"https://localhost:44333/authentication/logout-callback\", // Uri to the application logout callback\n  \"response_type\": \"code\", // OAuth flow response type. For `authorization_code` flow the response type is 'code'. For `implicit` flow, the response type is 'id_token token'\n  \"scope\": \"BlazorIdentityServer.ServerAPI openid profile\" // list of scope your application wants\n}\n</code></pre>\n\n<ul>\n<li><strong>Configure Api authorization to read config from your oidc.json file</strong><br>\nUpdate your <em>Program.cs</em> to be :</li>\n</ul>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using Microsoft.AspNetCore.Components.WebAssembly.Hosting;\nusing Microsoft.Extensions.DependencyInjection;\nusing System.Threading.Tasks;\n\nnamespace BlazorIdentityServer.Client\n{\n    public class Program\n    {\n        public static async Task Main(string[] args)\n        {\n            var builder = WebAssemblyHostBuilder.CreateDefault(args);\n            builder.RootComponents.Add&lt;App&gt;(\"app\");\n\n            builder.Services.AddBaseAddressHttpClient();\n            builder.Services.AddApiAuthorization(options =&gt; options.ProviderOptions.ConfigurationEndpoint = \"oidc.json\");\n\n            await builder.Build().RunAsync();\n        }\n    }\n}\n</code></pre>\n\n<h1>March 11th, 2020</h1>\n\n<p><a href=\"https://devblogs.microsoft.com/aspnet/blazor-webassembly-3-2-0-preview-2-release-now-available/\" rel=\"noreferrer\">3.2.0-preview2</a> provides a way to use Blazor Wasm with IdentityServer<br>\nRead </p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/aspnet/core/security/blazor/webassembly/hosted-with-identity-server?view=aspnetcore-3.1\" rel=\"noreferrer\">Secure an ASP.NET Core Blazor WebAssembly hosted app with Identity Server</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/aspnet/core/security/blazor/webassembly/additional-scenarios?view=aspnetcore-3.1#save-app-state-before-an-authentication-operation\" rel=\"noreferrer\">ASP.NET Core Blazor WebAssembly additional security scenarios</a></li>\n</ul>\n\n<h1>March 9th, 2020</h1>\n\n<p>At the moment there are some blazor OIDC lib you can use but none are certified and implement all features.</p>\n\n<ul>\n<li><a href=\"https://github.com/sounj142/HLSoft.BlazorWebAssembly.Authentication.OpenIdConnect\" rel=\"noreferrer\">HLSoft.BlazorWebAssembly.Authentication.OpenIdConnect</a>  </li>\n<li><a href=\"https://github.com/Authfix/Blazor-Oidc\" rel=\"noreferrer\">Authfix/Blazor-Oidc</a>  </li>\n<li><a href=\"https://github.com/sotsera/sotsera.blazor.oidc\" rel=\"noreferrer\">sotsera/sotsera.blazor.oidc</a>  </li>\n<li><a href=\"https://github.com/MV10/BlazorOIDC/tree/master/ClientSite\" rel=\"noreferrer\">MV10/BlazorOIDC</a>  </li>\n</ul>\n\n<p>If you are curious, I write <a href=\"https://github.com/aguacongas/TheIdServer/tree/master/src/Blazor/Aguacongas.Blazor.Oidc\" rel=\"noreferrer\">my own</a> to support token silent renew but it's not finished yet and I stuck by this issue : <a href=\"https://github.com/mono/mono/issues/17808\" rel=\"noreferrer\">[wasm] WasmHttpMessageHandler, Provide fetch options per message</a>.<br>\nThe issue is fixed in this <a href=\"https://github.com/mono/mono/pull/17932\" rel=\"noreferrer\">not yet merged PR</a>. So have to wait or implement my own <code>WasmHttpMessageHandler</code>.</p>\n\n<p>A second approach is to wrap <a href=\"https://github.com/IdentityModel/oidc-client-js\" rel=\"noreferrer\">oidc.js</a> using <a href=\"https://docs.microsoft.com/en-us/aspnet/core/blazor/call-javascript-from-dotnet?view=aspnetcore-3.1\" rel=\"noreferrer\">JS interop</a></p>\n"
    }
]