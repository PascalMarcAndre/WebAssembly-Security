{
    "tags": [
        "c#",
        "blazor",
        "blazor-webassembly"
    ],
    "owner": {
        "reputation": 281,
        "user_id": 10905290,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/78237a5c25d3617efc9395de0300d61c?s=128&d=identicon&r=PG&f=1",
        "display_name": "sda2584541",
        "link": "https://stackoverflow.com/users/10905290/sda2584541"
    },
    "is_answered": true,
    "view_count": 487,
    "accepted_answer_id": 63392012,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1597497523,
    "creation_date": 1597307691,
    "question_id": 63391217,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/63391217/why-blazor-webassembly-need-to-authorize-for-show-data",
    "title": "why blazor webassembly need to authorize for show data?",
    "body": "<p>I created a default Blazor web assembly with aspcore hosting (default template) and individual user account authentication. but I have a problem, I want to show data <code>FetchData.razor</code> component for <em>Anonymous</em> user.  by default, User must login on the website to view <code>FetchData.razor</code> component content.</p>\n<p>I change all [Authorize] attributes to <code>[AllowAnonymous]</code> component and web api even remove all <code>[Authorize]</code> attribute (on the component and web api). but still, go to redirect to the login page.</p>\n<p>Component:</p>\n<pre><code>using blazorAuten.Shared;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.Mvc;\nusing Microsoft.Extensions.Logging;\n\nnamespace blazorAuten.Server.Controllers\n{\n   // [Authorize]\n    [ApiController]\n    [Route(&quot;[controller]&quot;)]\n    public class WeatherForecastController : ControllerBase\n    {\n        private static readonly string[] Summaries = new[]\n        {\n            &quot;Freezing&quot;, &quot;Bracing&quot;, &quot;Chilly&quot;, &quot;Cool&quot;, &quot;Mild&quot;, &quot;Warm&quot;, &quot;Balmy&quot;, &quot;Hot&quot;, &quot;Sweltering&quot;, &quot;Scorching&quot;\n        };\n\n        private readonly ILogger&lt;WeatherForecastController&gt; logger;\n\n        public WeatherForecastController(ILogger&lt;WeatherForecastController&gt; logger)\n        {\n            this.logger = logger;\n        }\n\n        [HttpGet]\n        public IEnumerable&lt;WeatherForecast&gt; Get()\n        {\n            var rng = new Random();\n            return Enumerable.Range(1, 5).Select(index =&gt; new WeatherForecast\n            {\n                Date = DateTime.Now.AddDays(index),\n                TemperatureC = rng.Next(-20, 55),\n                Summary = Summaries[rng.Next(Summaries.Length)]\n            })\n            .ToArray();\n        }\n    }\n}\n\n</code></pre>\n<p><code>fetchdata</code> api controller:</p>\n<pre><code>@page &quot;/fetchdata&quot;\n@using Microsoft.AspNetCore.Authorization\n@using Microsoft.AspNetCore.Components.WebAssembly.Authentication\n@using blazorAuten.Shared\n@*@attribute [Authorize]*@\n@inject HttpClient Http\n\n&lt;h1&gt;Weather forecast&lt;/h1&gt;\n\n&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;\n\n@if (forecasts == null)\n{\n    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;\n}\nelse\n{\n    &lt;table class=&quot;table&quot;&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Date&lt;/th&gt;\n                &lt;th&gt;Temp. (C)&lt;/th&gt;\n                &lt;th&gt;Temp. (F)&lt;/th&gt;\n                &lt;th&gt;Summary&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            @foreach (var forecast in forecasts)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;\n                    &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;\n                    &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;\n                    &lt;td&gt;@forecast.Summary&lt;/td&gt;\n                &lt;/tr&gt;\n            }\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n}\n\n@code {\n    private WeatherForecast[] forecasts;\n\n    protected override async Task OnInitializedAsync()\n    {\n        try\n        {\n            forecasts = await Http.GetFromJsonAsync&lt;WeatherForecast[]&gt;(&quot;WeatherForecast&quot;);\n        }\n        catch (AccessTokenNotAvailableException exception)\n        {\n            exception.Redirect();\n        }\n    }\n\n}\n\n</code></pre>\n<p>as you can see, all <code>[Authorize]</code> attributes are comment. even check with <code>[AllowAnonymous]</code> is the same result.</p>\n<p>even in <code>App.Razor</code> component, I comment <code>&lt;RedirectToLogin /&gt;</code> component. but still when I go to the <code>fetchdata</code> component redirect to the login page:</p>\n<pre><code>&lt;CascadingAuthenticationState&gt;\n    &lt;Router AppAssembly=&quot;@typeof(Program).Assembly&quot;&gt;\n        &lt;Found Context=&quot;routeData&quot;&gt;\n            &lt;AuthorizeRouteView RouteData=&quot;@routeData&quot; DefaultLayout=&quot;@typeof(MainLayout)&quot;&gt;\n                &lt;NotAuthorized&gt;\n                    @if (!context.User.Identity.IsAuthenticated)\n                    {\n                        @*&lt;RedirectToLogin /&gt;*@\n                    }\n                    else\n                    {\n                        &lt;p&gt;You are not authorized to access this resource.&lt;/p&gt;\n                    }\n                &lt;/NotAuthorized&gt;\n            &lt;/AuthorizeRouteView&gt;\n        &lt;/Found&gt;\n        &lt;NotFound&gt;\n            &lt;LayoutView Layout=&quot;@typeof(MainLayout)&quot;&gt;\n                &lt;p&gt;Sorry, there's nothing at this address.&lt;/p&gt;\n            &lt;/LayoutView&gt;\n        &lt;/NotFound&gt;\n    &lt;/Router&gt;\n&lt;/CascadingAuthenticationState&gt;\n</code></pre>\n<p>so if I want to show data from api to anonymous users (guest users that for fist time visit web site) what should I do? all web site visitors must sign-in? all data from api (server) need to user authorize?</p>\n"
}