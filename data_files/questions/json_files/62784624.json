{
    "tags": [
        "asp.net-core",
        "identityserver4",
        "blazor",
        "azure-web-app-service",
        "webassembly"
    ],
    "owner": {
        "reputation": 1,
        "user_id": 7781794,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c82d725287786e2b72b12c7ab0692b37?s=128&d=identicon&r=PG&f=1",
        "display_name": "Uche Chima",
        "link": "https://stackoverflow.com/users/7781794/uche-chima"
    },
    "is_answered": false,
    "view_count": 172,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1594159549,
    "creation_date": 1594159549,
    "question_id": 62784624,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/62784624/azure-app-service-windows-and-blazor-webassembly-asp-net-core-hosted-with-oid",
    "title": "Azure App Service (Windows) and Blazor WebAssembly ASP.NET Core hosted with Oid and Identity Server can&#39;t log User in",
    "body": "<p>From web dev tool:</p>\n<ul>\n<li>Uncaught ReferenceError: jQuery is not defined</li>\n<li>Failed to find a valid digest in the 'integrity' attribute for resource</li>\n</ul>\n<p>I get the following results from Nlog:</p>\n<p>DEBUG|PIMSAuthPlus.Server.Program|init main\n2020-07-07 11:37:45.8402||INFO|IdentityServer4.Startup|Starting IdentityServer4 version 3.0.0.0\n2020-07-07 11:37:46.4143||INFO|IdentityServer4.Startup|Using explicitly configured authentication scheme Identity.Application for IdentityServer\n2020-07-07 11:37:46.4203||DEBUG|IdentityServer4.Startup|Using Identity.Application as default ASP.NET Core scheme for authentication\n2020-07-07 11:37:46.4203||DEBUG|IdentityServer4.Startup|Using Identity.External as default ASP.NET Core scheme for sign-in\n2020-07-07 11:37:46.4203||DEBUG|IdentityServer4.Startup|Using Identity.External as default ASP.NET Core scheme for sign-out\n2020-07-07 11:37:46.4358||DEBUG|IdentityServer4.Startup|Using Identity.Application as default ASP.NET Core scheme for challenge\n2020-07-07 11:37:46.4358||DEBUG|IdentityServer4.Startup|Using Identity.Application as default ASP.NET Core scheme for forbid\n2020-07-07 11:37:46.8029||INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.\n2020-07-07 11:37:46.8029||INFO|Microsoft.Hosting.Lifetime|Hosting environment: Production\n2020-07-07 11:37:46.8029||INFO|Microsoft.Hosting.Lifetime|Content root path: D:\\home\\site\\wwwroot\n2020-07-07 11:37:46.9417||DEBUG|IdentityServer4.Startup|Login Url: /Identity/Account/Login\n2020-07-07 11:37:46.9551||DEBUG|IdentityServer4.Startup|Login Return Url Parameter: ReturnUrl\n2020-07-07 11:37:46.9551||DEBUG|IdentityServer4.Startup|Logout Url: /Identity/Account/Logout\n2020-07-07 11:37:46.9671||DEBUG|IdentityServer4.Startup|ConsentUrl Url: /consent\n2020-07-07 11:37:46.9671||DEBUG|IdentityServer4.Startup|Consent Return Url Parameter: returnUrl\n2020-07-07 11:37:46.9671||DEBUG|IdentityServer4.Startup|Error Url: /home/error\n2020-07-07 11:37:46.9855||DEBUG|IdentityServer4.Startup|Error Id Parameter: errorId\n2020-07-07 11:37:47.0087||TRACE|IdentityServer4.Hosting.EndpointRouter|No endpoint entry found for request path: /\n2020-07-07 11:37:53.1980||TRACE|IdentityServer4.Hosting.EndpointRouter|No endpoint entry found for request path: /_configuration/AuthPlus.Client\n2020-07-07 11:37:54.2590||DEBUG|IdentityServer4.Hosting.EndpointRouter|Request path /.well-known/openid-configuration matched to endpoint type Discovery\n2020-07-07 11:37:54.2802||DEBUG|IdentityServer4.Hosting.EndpointRouter|Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint\n2020-07-07 11:37:54.2802||INFO|IdentityServer4.Hosting.IdentityServerMiddleware|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration\n2020-07-07 11:37:54.2802||TRACE|IdentityServer4.Endpoints.DiscoveryEndpoint|Processing discovery request.\n2020-07-07 11:37:54.2974||DEBUG|IdentityServer4.Endpoints.DiscoveryEndpoint|Start discovery request\n2020-07-07 11:37:54.2974||TRACE|IdentityServer4.Endpoints.DiscoveryEndpoint|Calling into discovery response generator: IdentityServer4.ResponseHandling.DiscoveryResponseGenerator\n2020-07-07 11:37:54.3661||TRACE|IdentityServer4.Hosting.IdentityServerMiddleware|Invoking result: IdentityServer4.Endpoints.Results.DiscoveryDocumentResult\n2020-07-07 11:37:54.6799||DEBUG|IdentityServer4.Hosting.EndpointRouter|Request path /connect/authorize matched to endpoint type Authorize\n2020-07-07 11:37:54.6951||DEBUG|IdentityServer4.Hosting.EndpointRouter|Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint\n2020-07-07 11:37:54.6951||INFO|IdentityServer4.Hosting.IdentityServerMiddleware|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize\n2020-07-07 11:37:54.7074||DEBUG|IdentityServer4.Endpoints.AuthorizeEndpoint|Start authorize request\n2020-07-07 11:37:54.7074||DEBUG|IdentityServer4.Endpoints.AuthorizeEndpoint|No user present in authorize request\n2020-07-07 11:37:54.7274||DEBUG|IdentityServer4.Validation.AuthorizeRequestValidator|Start authorize request protocol validation\n2020-07-07 11:37:54.7401||TRACE|IdentityServer4.Stores.ValidatingClientStore|Calling into client configuration validator: IdentityServer4.Validation.DefaultClientConfigurationValidator\n2020-07-07 11:37:54.7523||DEBUG|IdentityServer4.Stores.ValidatingClientStore|client configuration validation for client PIMSAuthPlus.Client succeeded.\n2020-07-07 11:37:54.7726||DEBUG|IdentityServer4.Validation.AuthorizeRequestValidator|Checking for PKCE parameters\n2020-07-07 11:37:54.8202||DEBUG|IdentityServer4.Validation.AuthorizeRequestValidator|Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator\n2020-07-07 11:37:54.8284||TRACE|IdentityServer4.Validation.AuthorizeRequestValidator|Authorize request protocol validation successful\n2020-07-07 11:37:54.8284||DEBUG|IdentityServer4.Endpoints.AuthorizeEndpoint|ValidatedAuthorizeRequest\n{&quot;ClientId&quot;:&quot;AuthPlus.Client&quot;, &quot;ClientName&quot;:&quot;AuthPlus.Client&quot;, &quot;RedirectUri&quot;:&quot;https://web.azurewebsites.net/authentication/login-callback&quot;, &quot;AllowedRedirectUris&quot;:[&quot;/authentication/login-callback&quot;], &quot;SubjectId&quot;:&quot;anonymous&quot;, &quot;ResponseType&quot;:&quot;code&quot;, &quot;ResponseMode&quot;:&quot;query&quot;, &quot;GrantType&quot;:&quot;authorization_code&quot;, &quot;RequestedScopes&quot;:&quot;AuthPlus.ServerAPI openid profile&quot;, &quot;State&quot;:&quot;de5022efa8ab41e7ad3c147ef8a27103&quot;, &quot;PromptMode&quot;:&quot;none&quot;, &quot;Raw&quot;:{&quot;client_id&quot;:&quot;AuthPlus.Client&quot;,&quot;redirect_uri&quot;:&quot;https://web.azurewebsites.net/authentication/login-callback&quot;,&quot;response_type&quot;:&quot;code&quot;,&quot;scope&quot;:&quot;AuthPlus.ServerAPI openid profile&quot;,&quot;state&quot;:&quot;de5022efa8ab41e7ad3c147ef8a27103&quot;,&quot;code_challenge&quot;:&quot;JKcawO4PygltOyd1nGiOAOwRXoGMVv2DYo6X_a74F4U&quot;,&quot;code_challenge_method&quot;:&quot;S256&quot;,&quot;prompt&quot;:&quot;none&quot;,&quot;response_mode&quot;:&quot;query&quot;}}\n2020-07-07 11:37:54.9113||TRACE|IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator|ProcessInteractionAsync\n2020-07-07 11:37:54.9113||INFO|IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator|Showing error: prompt=none was requested but user is not authenticated\n2020-07-07 11:37:54.9264||INFO|IdentityServer4.Endpoints.AuthorizeEndpoint|{&quot;ClientId&quot;:&quot;AuthPlus.Client&quot;, &quot;ClientName&quot;:&quot;AuthPlus.Client&quot;, &quot;RedirectUri&quot;:&quot;https://web.azurewebsites.net/authentication/login-callback&quot;, &quot;AllowedRedirectUris&quot;:[&quot;/authentication/login-callback&quot;], &quot;SubjectId&quot;:&quot;anonymous&quot;, &quot;ResponseType&quot;:&quot;code&quot;, &quot;ResponseMode&quot;:&quot;query&quot;, &quot;GrantType&quot;:&quot;authorization_code&quot;, &quot;RequestedScopes&quot;:&quot;AuthPlus.ServerAPI openid profile&quot;, &quot;State&quot;:&quot;de5022efa8ab41e7ad3c147ef8a27103&quot;, &quot;PromptMode&quot;:&quot;none&quot;, &quot;Raw&quot;:{&quot;client_id&quot;:&quot;AuthPlus.Client&quot;,&quot;redirect_uri&quot;:&quot;https://web.azurewebsites.net/authentication/login-callback&quot;,&quot;response_type&quot;:&quot;code&quot;,&quot;scope&quot;:&quot;PIMSAuthPlus.ServerAPI openid profile&quot;,&quot;state&quot;:&quot;de5022efa8ab41e7ad3c147ef8a27103&quot;,&quot;code_challenge&quot;:&quot;JKcawO4PygltOyd1nGiOAOwRXoGMVv2DYo6X_a74F4U&quot;,&quot;code_challenge_method&quot;:&quot;S256&quot;,&quot;prompt&quot;:&quot;none&quot;,&quot;response_mode&quot;:&quot;query&quot;}}\n2020-07-07 11:37:54.9564||INFO|IdentityServer4.Events.DefaultEventService|{&quot;ClientId&quot;:&quot;AuthPlus.Client&quot;, &quot;ClientName&quot;:&quot;AuthPlus.Client&quot;, &quot;RedirectUri&quot;:&quot;https://web.azurewebsites.net/authentication/login-callback&quot;, &quot;Endpoint&quot;:&quot;Authorize&quot;, &quot;Scopes&quot;:&quot;AuthPlus.ServerAPI openid profile&quot;, &quot;GrantType&quot;:&quot;authorization_code&quot;, &quot;Error&quot;:&quot;login_required&quot;, &quot;Category&quot;:&quot;Token&quot;, &quot;Name&quot;:&quot;Token Issued Failure&quot;, &quot;EventType&quot;:&quot;Failure&quot;, &quot;Id&quot;:2001, &quot;ActivityId&quot;:&quot;8000103e-0000-fb00-b63f-84710c7967bb&quot;, &quot;TimeStamp&quot;:&quot;2020-07-07T11:37:54Z&quot;, &quot;ProcessId&quot;:19076, &quot;LocalIpAddress&quot;:&quot;xxx.6.214:xxx&quot;, &quot;RemoteIpAddress&quot;:&quot;xxx.112.115.xxx&quot;}\n2020-07-07 11:37:54.9816||TRACE|IdentityServer4.Endpoints.AuthorizeEndpoint|End authorize request. result type: IdentityServer4.Endpoints.Results.AuthorizeResult\n2020-07-07 11:37:54.9930||TRACE|IdentityServer4.Hosting.IdentityServerMiddleware|Invoking result: IdentityServer4.Endpoints.Results.AuthorizeResult\n2020-07-07 11:37:55.1625||TRACE|IdentityServer4.Hosting.EndpointRouter|No endpoint entry found for request path: /authentication/login-callback\n2020-07-07 11:38:14.9032||DEBUG|IdentityServer4.Hosting.EndpointRouter|Request path /connect/authorize matched to endpoint type Authorize\n2020-07-07 11:38:14.9167||DEBUG|IdentityServer4.Hosting.EndpointRouter|Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint\n2020-07-07 11:38:14.9227||INFO|IdentityServer4.Hosting.IdentityServerMiddleware|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize\n2020-07-07 11:38:14.9227||DEBUG|IdentityServer4.Endpoints.AuthorizeEndpoint|Start authorize request</p>\n"
}