{
    "tags": [
        "javascript",
        "vue.js",
        "module",
        "webassembly",
        "emscripten"
    ],
    "owner": {
        "reputation": 509,
        "user_id": 2315094,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://www.gravatar.com/avatar/7dbc931c7f9da91b1aca5f461d25edb0?s=128&d=identicon&r=PG",
        "display_name": "user2315094",
        "link": "https://stackoverflow.com/users/2315094/user2315094"
    },
    "is_answered": true,
    "view_count": 1073,
    "accepted_answer_id": 59488387,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1580799465,
    "creation_date": 1577356821,
    "last_edit_date": 1580799465,
    "question_id": 59487224,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/59487224/webpack-throws-error-with-emscripten-cant-resolve-fs",
    "title": "Webpack throws error with Emscripten: Can&#39;t resolve &#39;fs&#39;",
    "body": "<p>I'm encountering errors in importing a javascript file into a vue.js component:</p>\n\n<p>This is the content of /components sub-folder:</p>\n\n<pre><code>/startingV/src/components$ ls -lah\ntotal 132K\ndrwxr-xr-x 2 marco marco 4,0K dic 26 11:22 .\ndrwxr-xr-x 5 marco marco 4,0K dic 26 09:32 ..\n-rw-r--r-- 1 marco marco  441 nov  2  2016 Counter.vue\n-rw-r--r-- 1 marco marco  441 dic 21 15:13 FormValidation.vue\n-rw-r--r-- 1 marco marco 100K dic 26 10:38 js_plumbing.js\n-rw-r--r-- 1 marco marco 9,3K dic 26 10:38 js_plumbing.wasm\n-rw-r--r-- 1 marco marco  473 dic 26 11:14 Result.vue\n</code></pre>\n\n<p>When compiling:</p>\n\n<pre><code>Failed to compile.\n\n./src/components/js_plumbing.js\nModule not found: Error: Can't resolve 'fs' in '/home/marco/cpp/WebAssemblyinAction\n/Appendix_B/B.1_ccall/startingV/src/components'\n</code></pre>\n\n<p>this is the Result.vue file:</p>\n\n<pre><code>template&gt;\n    &lt;p button @click=\"callAdd\"&gt;Add!&lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    import * as js_plumbing from './js_plumbing'\n    export default {\n      data () {\n        return {\n          result: null\n        }\n      },\n      methods: {\n        callAdd() {\n          const result = Module.ccall('js_plumbing.Add',\n              'number',\n              ['number', 'number'],\n              [1, 2]);\n          console.log('Result: ${result}');\n        }\n      }\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>The js_plumbing.js and the js_plumbing.wasm files have been generated through this command :  </p>\n\n<pre><code>emcc add.c -o js_plumbing.js -s EXTRA_EXPORTED_RUNTIME_METHODS=['ccall','cwrap']\n</code></pre>\n\n<p>where add.c is:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;emscripten.h&gt;\n\n// If this is an Emscripten (WebAssembly) build then...\n#ifdef __EMSCRIPTEN__\n  #include &lt;emscripten.h&gt;\n#endif\n\n#ifdef __cplusplus\nextern \"C\" { // So that the C++ compiler does not rename our function names\n#endif\n\nEMSCRIPTEN_KEEPALIVE\nint Add(int value1, int value2) \n{\n  return (value1 + value2); \n}\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>This is the link I took some info about how to generate the .js and .wasm files:\n<a href=\"https://emscripten.org/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-code-ccall-cwrap\" rel=\"nofollow noreferrer\">https://emscripten.org/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-code-ccall-cwrap</a></p>\n\n<p>Complete error message in the command line when doing npn run dev :</p>\n\n<pre><code>(base) marco@marco-U36SG:~/cpp/WebAssemblyinAction/Appendix_B \n/B.1_ccall/startingV$ npm run dev\n\n&gt; myproject@1.0.0 dev /home/marco/cpp/WebAssemblyinAction/Appendix_B \n/B.1_ccall/startingV\n&gt; cross-env NODE_ENV=development webpack-dev-server --open --hot\n\n\u2716 \uff62wdm\uff63: Hash: 12bee4de7abfde1cbc5d\nVersion: webpack 4.41.3\nTime: 6707ms\nBuilt at: 12/26/2019 12:37:07 PM\n   Asset      Size  Chunks                    Chunk Names\nbuild.js  2.18 MiB    main  [emitted]  [big]  main\nEntrypoint main [big] = build.js\n[0] multi (webpack)-dev-server/client?http://localhost:8080   \n(webpack)/hot/dev-server.js ./src/main.js 52 bytes {main} [built]\n[./node_modules/strip-ansi/index.js] 161 bytes {main} [built]\n[./node_modules/vue/dist/vue.esm.js] 319 KiB {main} [built]\n[./node_modules/webpack-dev-server/client/index.js?http:\n//localhost:8080] (webpack)-dev-server/client?http://localhost:8080  \n4.29 KiB {main} [built]\n[./node_modules/webpack-dev-server/client/overlay.js] (webpack)-dev-\nserver/client/overlay.js 3.51 KiB {main} [built]\n[./node_modules/webpack-dev-server/client/socket.js] (webpack)-dev-\nserver/client/socket.js 1.53 KiB {main} [built]\n[./node_modules/webpack-dev-server/client/utils/createSocketUrl.js]   \n(webpack)-dev-server/client/utils/createSocketUrl.js 2.89 KiB {main} \n[built]\n[./node_modules/webpack-dev-server/client/utils/log.js] (webpack)-dev-\nserver/client/utils/log.js 964 bytes {main} [built]\n[./node_modules/webpack-dev-server/client/utils/reloadApp.js] \n(webpack)-dev-server/client/utils/reloadApp.js 1.59 KiB {main} [built]\n[./node_modules/webpack-dev-server/client/utils/sendMessage.js] \n(webpack)-dev-server/client/utils/sendMessage.js 402 bytes {main}   \n[built]\n[./node_modules/webpack/hot sync ^\\.\\/log$] (webpack)/hot sync \nnonrecursive ^\\.\\/log$ 170 bytes {main} [built]\n[./node_modules/webpack/hot/dev-server.js] (webpack)/hot/dev-server.js\n 1.59 KiB {main} [built]\n[./node_modules/webpack/hot/emitter.js] (webpack)/hot/emitter.js 75 \nbytes {main} [built]\n[./node_modules/webpack/hot/log-apply-result.js] (webpack)/hot/log-\napply-result.js 1.27 KiB {main} [built]\n[./src/main.js] 134 bytes {main} [built]\n    + 34 hidden modules\n\nERROR in ./src/components/js_plumbing.js\nModule not found: Error: Can't resolve 'fs' in '/home/marco \n/cpp/WebAssemblyinAction/Appendix_B/B.1_ccall/startingV\n/src/components'\n @ ./src/components/js_plumbing.js 88:26-39\n @ ./node_modules/babel-loader/lib!./node_modules/vue-loader\n/lib/selector.js?type=script&amp;index=0!./src/components/Result.vue\n @ ./src/components/Result.vue\n @ ./node_modules/babel-loader/lib!./node_modules/vue-loader\n/lib/selector.js?type=script&amp;index=0!./src/App.vue\n @ ./src/App.vue\n @ ./src/main.js\n</code></pre>\n\n<p>How to solve it?\nMarco</p>\n"
}